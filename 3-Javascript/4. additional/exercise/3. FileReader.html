<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />

    <title>FileReader, Card UI</title>
  </head>

  <body style="width: 500px" class="mx-auto">
    <form action="submin" style="width: 650px" class="row g-2 my-4">
      <div class="form-floating" style="width: 99%">
        <textarea
          class="form-control"
          id="textarea"
          style="height: 100px"
        ></textarea>
        <label for="floatingTextarea2">Leave a message here</label>
      </div>
      <div class="col-auto" style="width: 85%">
        <input
          type="file"
          required
          class="form-control"
          id="input-file"
          accept="image/*, video/*"
        />
      </div>
      <div class="col-auto" style="width: 15%">
        <button type="submit" class="btn btn-primary mb-3" id="button">
          Confirm
        </button>
      </div>
    </form>

    <!-- <div class="card" style="width: 635px;">
        <img src="..." class="card-img-top" alt="...">
        <div class="card-body">
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's
                content.</p>
            <button id="removebtn" class="btn btn-primary">REMOVE</button>
        </div>
    </div> -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
      crossorigin="anonymous"
    ></script>

    <script>
      const fileInput = document.querySelector("input[type='file']");
      const textArea = document.querySelector("textarea");
      const btn = document.querySelector("button");

      btn.addEventListener("click", inputThis);

      function inputThis() {
        const file = fileInput.files[0];

        if (!file) return;

        const reader = new FileReader();

        reader.readAsDataURL(file);

        reader.onload = () => {
          const dataUrl = reader.result;

          let elm = "";
          if (file.type.includes("image") && textArea) {
            elm = /*html*/ `<img src={dataUrl} class="card-img-top" alt="...">
                    <div class="card-body">
                        <p class="card-text">textArea</p>
                        <button id="removebtn" class="btn btn-primary">REMOVE</button>
                        </div>`;
          }
          div.innerHTML = elm;
          document.insertAdjacentHTML(
            "afterend",
            "<div class='card' style='width: 635px;' id='div'></div>"
          );
        };
      }
    </script>
  </body>
</html>

<!-- 
https://developer.mozilla.org/ko/docs/Web/API/FileReader/readAsDataURL



 -->
